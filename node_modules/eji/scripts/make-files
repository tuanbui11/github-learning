#!/usr/bin/env babel-node
// vim: set syntax=javascript:

import fs from 'fs';
import path from 'path';
import data from '../data/emoji.json';
import {fromCodePoint, codePointAt} from 'codepoint';

// build our data for the letter files
const names = Object.keys(data);
const letters = {};
names.forEach((name) => {
    const first = letters[name][0];
    letters[first] = letters[first] || {};

    letters[first][name] = data[name];
});

// build our data for the emoji files
const modGroups = {};

names.forEach((name) => {
    var emoji = data[name];
    var point = codePointAt(emoji, 0);
    var group = point % 32;

    modGroups[group] = modGroups[group] || {};
    modGroups[group][emoji] = name;
});

// write the files!
var p = (name) => path.join(__dirname, '..', 'data', name + '.txt');
Object.keys(letters).forEach((first) => {
    var values = letters[first];
    var str = Object.keys(values).map((name) => {
        
    });
    fs.writeFile(p('letter_' + first), str);
});

